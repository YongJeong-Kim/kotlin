package com.kyj.kotlinwithreact

import com.kyj.kotlinwithreact.domain.User
import com.kyj.kotlinwithreact.security.PBKDF2Encoder
import com.kyj.kotlinwithreact.security.model.Role
import com.kyj.kotlinwithreact.service.UserService
import org.springframework.data.mongodb.core.ReactiveMongoOperations
import org.springframework.stereotype.Component
import reactor.core.publisher.Mono
import reactor.core.publisher.toMono
import javax.annotation.PostConstruct

@Component
class Init(
  val operations: ReactiveMongoOperations,
  val pbkdF2Encoder: PBKDF2Encoder,
  val userService: UserService) {
  @PostConstruct
  fun init() {
    operations.collectionExists("user").subscribe {
      if (it) println("exist collection")
      else operations.createCollection("user").subscribe {
        val avatarEncoded = "data:image/jpeg;base64,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"
        val persons = listOf(
          User("user", pbkdF2Encoder.encode("user"), listOf(Role.ROLE_USER), avatarEncoded ),
          User("admin", pbkdF2Encoder.encode("admin"), listOf(Role.ROLE_ADMIN), avatarEncoded ))
        persons.map(User::toMono).map(userService::createUser).map(Mono<User>::subscribe)
      }
    }
  }
}